import { Box } from '@chakra-ui/react';
import { MetaframeStandaloneComponent } from '@metapages/metapage-embed-react';

export const ValueBar: React.FC<{
  value: number;
}> = ({ value }) => {

  return (
    <Box w="100%">
      <MetaframeStandaloneComponent
        url="https://js.mtfm.io/?v=1&c=eyJtb2R1bGVzIjpbXSwib3B0Ijp7fX0%3D#?js=Y29uc3QgZGlzcG9zZXJzID0gW107CmNvbnN0IHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicm9vdCIpOwp3aGlsZSAocm9vdC5maXJzdENoaWxkKSB7CiAgcm9vdC5yZW1vdmVDaGlsZChyb290Lmxhc3RDaGlsZCk7Cn0KbGV0IGNvbG9yID0gImxpZ2h0Z3JleSI7Cgpjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CmxldCBsYXN0VmFsdWVSYXcgPSAwOwpsZXQgbGFzdFZhbHVlID0gMDsvL3dpbmRvdy5pbm5lcldpZHRoIC8gMjsKY2FudmFzLmhlaWdodCA9IDIwOwpyb290LmFwcGVuZENoaWxkKGNhbnZhcyk7Cgpjb25zdCBkcmF3ID0gKCkgPT4gewogIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwogIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAvLyBkcmF3IHRoZSByZWN0IG9uIHRoZSB0cmFuc2Zvcm1lZCBjb250ZXh0CiAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yOwogIGN0eC5maWxsUmVjdCgwLCAwLCBsYXN0VmFsdWUsIGNhbnZhcy5oZWlnaHQpOwogIGN0eC5iZWdpblBhdGgoKTsKICBjdHguc3Ryb2tlU3R5bGUgPSAiYmxhY2siOwogIGN0eC5yZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7CiAgY3R4LnN0cm9rZSgpOwogIGN0eC5maWxsU3R5bGUgPSAiYmxhY2siOwogIGN0eC5mb250ID0gIjE0cHggc2VyaWYiOwogIGN0eC5maWxsVGV4dChsYXN0VmFsdWVSYXcsIDIsIDE2KTsKICAKfTsKCi8vIExpc3RlbiB0byBhbiBpbnB1dApkaXNwb3NlcnMucHVzaCgKICBtZXRhZnJhbWUub25JbnB1dCgidmFsdWUiLCB2YWx1ZSA9PiB7CiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgIH0KICAgIC8vIGNsYW1wIGp1c3QgaW4gY2FzZQogICAgbGFzdFZhbHVlUmF3ID0gdmFsdWU7CiAgICBsYXN0VmFsdWUgPSBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgMCksIDEpICogY2FudmFzLndpZHRoOwogICAgZHJhdygpOwogIH0pCik7CmRpc3Bvc2Vycy5wdXNoKAogIG1ldGFmcmFtZS5vbklucHV0KCJjb2xvciIsIG5ld0NvbG9yID0+IHsKICAgIGNvbG9yID0gbmV3Q29sb3I7CiAgICBkcmF3KCk7CiAgfSkKKTsKCmNvbnN0IHJlc2l6ZUNhbnZhcyA9ICgpID0+IHsKICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsKICBkcmF3KCk7Cn0KLy8gc2NyZWVuIHJlc2l6aW5nCndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYW52YXMsIGZhbHNlKTsKLy8gRHJhdyBjYW52YXMgYm9yZGVyIGZvciB0aGUgZmlyc3QgdGltZS4KcmVzaXplQ2FudmFzKCk7CgovLyBSZXR1cm4gYSBjbGVhbnVwIGZ1bmN0aW9uCnJldHVybiAoKSA9PiB7CiAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHJlc2l6ZUNhbnZhcyk7CiAgd2hpbGUgKGRpc3Bvc2Vycy5sZW5ndGggPiAwKSB7CiAgICBkaXNwb3NlcnMucG9wKCkoKTsKICB9Cn07"
        inputs={{ value }}
      />
    </Box>
  );
};
